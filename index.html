<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Search with Popup Modal</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet"
    />
    <style>
        .filter-container {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            background-color: #f9f9f9;
        }
        .filter-title {
            font-weight: bold;
            margin-bottom: 10px;
        }
        .item-card {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            text-align: center;
            transition: transform 0.2s;
        }
        .item-card:hover {
            transform: scale(1.05);
        }
        .item-icon {
            font-size: 40px;
            color: #007bff;
        }
        .item-subtitle {
            color: #6c757d;
            font-size: 0.9rem;
        }
        .tag-label {
            margin-left: 5px;
            color: #6c757d;
            font-size: 0.9rem;
        }
        .sidebar {
            position: sticky;
            top: 20px;
        }
        .modal-body {
            font-size: 0.95rem;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Dynamic Search with Popup Modal</h1>
        <div class="row mt-4">
            <!-- Grid of Items -->
            <div class="col-lg-8 col-md-7">
                <div class="row" id="dataList">
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="Kurz St√°≈æ Osobn√≠_rozvoj" data-country="Jihoƒçesk√Ω kraj" data-subtitle="A crunchy and sweet fruit" data-detail="Apples are rich in fiber, vitamin C, and antioxidants. Great for a healthy snack.">
                        <div class="item-card">
                            <div class="item-icon">üçé</div>
                            <div class="item-name">Nebojme se myslet!</div>
                            <div class="item-subtitle">Filozofick√° soutƒõ≈æ pro studenty p≈ôedposledn√≠ch a absolventsk√Ωch roƒçn√≠k≈Ø st≈ôedn√≠ch ≈°kol</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Filozofick√° soutƒõ≈æ pro studenty p≈ôedposledn√≠ch a absolventsk√Ωch roƒçn√≠k≈Ø st≈ôedn√≠ch ≈°kol" data-subtitle="C√≠lem projektu je podpo≈ôit rozvoj kritick√©ho my≈°len√≠ u student≈Ø p≈ôedposledn√≠ch a p≈ôedev≈°√≠m z√°vƒõreƒçn√Ωch roƒçn√≠k≈Ø st≈ôedo≈°kolsk√©ho studia (pro √∫ƒçast v soutƒõ≈æi nen√≠ nezbytn√© absolvov√°n√≠ v√Ωuky filozofie v r√°mci ZSV nebo speci√°ln√≠ho semin√°≈ôe: od soutƒõ≈æ√≠c√≠ch nebudou vy≈æadov√°ny ≈æ√°dn√© konkr√©tn√≠ znalosti, pouze schopnost konstruktivn√≠ho uva≈æov√°n√≠ a zformulov√°n√≠ vlastn√≠ho n√°zoru). √öƒçast√≠ na soutƒõ≈æi budou m√≠t studenti mo≈ænost vyzkou≈°et si vytvo≈ôen√≠ vlastn√≠ho filozofick√©ho textu ve formƒõ √∫vahy a z√≠skat zpƒõtnou vazbu prost≈ôednictv√≠m hodnocen√≠, je≈æ vypracuj√≠ ƒçlenov√© Katedry filozofie Filozofick√© fakulty UP v Olomouci. T≈ôi nejlep≈°√≠ pr√°ce budou ohodnoceny vƒõcn√Ωmi cenami (Amazon Kindle). Z n√°rodn√≠ho kola z√°rove≈à vzejde dvacet nejlep≈°√≠ch student≈Ø, kte≈ô√≠ mohou soutƒõ≈æit o √∫ƒçast na Mezin√°rodn√≠ filozofick√© olympi√°dƒõ (IPO), do n√≠≈æ je soutƒõ≈æ ‚ÄûNebojme se myslet‚Äú n√°rodn√≠ kvalifikac√≠. Do Mezin√°rodn√≠ filozofick√© olympi√°dy postupuj√≠ dva nejlep≈°√≠ studenti, kte≈ô√≠ vzejdu z druh√©ho kola soutƒõ≈æe.">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="Dobrovolnictv√≠" data-country="Plze≈àsk√Ω kraj" data-subtitle="A soft and creamy fruit" data-detail="Bananas are high in potassium and vitamins. A great energy boost!">
                        <div class="item-card">
                            <div class="item-icon">üçå</div>
                            <div class="item-name">Fulbrightovy stipendijn√≠ programy</div>
                            <div class="item-subtitle">Presti≈æn√≠ Fulbrightovy stipendijn√≠ programy financovan√© ƒçeskou a americkou vl√°dou poskytuj√≠ ƒçesk√Ωm obƒçan≈Øm p≈ô√≠le≈æitost studovat, prov√°dƒõt v√Ωzkum ƒçi vyuƒçovat v USA. ƒåesk√Ωm vzdƒõl√°vac√≠m a v√Ωzkumn√Ωm instituc√≠m pak d√°vaj√≠ mo≈ænost z√≠skat pedagoga nebo vƒõdce z USA.</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Presti≈æn√≠ Fulbrightovy stipendijn√≠ programy financovan√© ƒçeskou a americkou vl√°dou poskytuj√≠ ƒçesk√Ωm obƒçan≈Øm p≈ô√≠le≈æitost studovat, prov√°dƒõt v√Ωzkum ƒçi vyuƒçovat v USA. ƒåesk√Ωm vzdƒõl√°vac√≠m a v√Ωzkumn√Ωm instituc√≠m pak d√°vaj√≠ mo≈ænost z√≠skat pedagoga nebo vƒõdce z USA.">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="Dobrovolnictv√≠ Stipendium Biologie" data-country="√östeck√Ω kraj" data-subtitle="A small and tart fruit" data-detail="Cherries are packed with antioxidants and anti-inflammatory compounds.">
                        <div class="item-card">
                            <div class="item-icon">üçí</div>
                            <div class="item-name">Stipendia DAAD</div>
                            <div class="item-subtitle">Stipendia DAAD p≈ôin√°≈°ej√≠ mo≈ænosti v podobƒõ:</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Cherry, A small and tart fruit, Cherries are packed with antioxidants and anti-inflammatory compounds.">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="Dobrovolnictv√≠ Stipendium Architektura" data-country="Moravskoslezsk√Ω kraj" data-subtitle="A small and tart fruit" data-detail="Cherries are packed with antioxidants and anti-inflammatory compounds.">
                        <div class="item-card">
                            <div class="item-icon">üçå</div>
                            <div class="item-name">Stipendia DAAD</div>
                            <div class="item-subtitle">Stipendia DAAD p≈ôin√°≈°ej√≠ mo≈ænosti v podobƒõ:</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Cherry, A small and tart fruit, Cherries are packed with antioxidants and anti-inflammatory compounds.">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="Kurz Matematika" data-country="Moravskoslezsk√Ω kraj" data-subtitle="A small and tart fruit" data-detail="Cherries are packed with antioxidants and anti-inflammatory compounds.">
                        <div class="item-card">
                            <div class="item-icon">üçí</div>
                            <div class="item-name">Stipendia DAAD</div>
                            <div class="item-subtitle">Stipendia DAAD p≈ôin√°≈°ej√≠ mo≈ænosti v podobƒõ:</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Cherry, A small and tart fruit, Cherries are packed with antioxidants and anti-inflammatory compounds.">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="Dobrovolnictv√≠ Stipendium ≈Ωurnalistika" data-country="cel√° ƒåR/online" data-subtitle="A small and tart fruit" data-detail="Cherries are packed with antioxidants and anti-inflammatory compounds.">
                        <div class="item-card">
                            <div class="item-icon">üçí</div>
                            <div class="item-name">Stipendia DAAD</div>
                            <div class="item-subtitle">Stipendia DAAD p≈ôin√°≈°ej√≠ mo≈ænosti v podobƒõ:</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Cherry, A small and tart fruit, Cherries are packed with antioxidants and anti-inflammatory compounds.">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="Stipendium ≈Ωurnalistika" data-country="cel√° ƒåR/online" data-subtitle="A small and tart fruit" data-detail="Cherries are packed with antioxidants and anti-inflammatory compounds.">
                        <div class="item-card">
                            <div class="item-icon">üçå</div>
                            <div class="item-name">Stipendia DAAD</div>
                            <div class="item-subtitle">Stipendia DAAD p≈ôin√°≈°ej√≠ mo≈ænosti v podobƒõ:</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Cherry, A small and tart fruit, Cherries are packed with antioxidants and anti-inflammatory compounds.">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="≈Ωurnalistika" data-country="cel√° ƒåR/online" data-subtitle="A small and tart fruit" data-detail="Cherries are packed with antioxidants and anti-inflammatory compounds.">
                        <div class="item-card">
                            <div class="item-icon">‚úçÔ∏è</div>
                            <div class="item-name">Stipendia DAAD</div>
                            <div class="item-subtitle">Stipendia DAAD p≈ôin√°≈°ej√≠ mo≈ænosti v podobƒõ:</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Cherry, A small and tart fruit, Cherries are packed with antioxidants and anti-inflammatory compounds.">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="Stipendium" data-country="cel√° ƒåR/online" data-subtitle="A small and tart fruit" data-detail="Cherries are packed with antioxidants and anti-inflammatory compounds.">
                        <div class="item-card">
                            <div class="item-icon">‚ôä</div>
                            <div class="item-name">Stipendia DAAD</div>
                            <div class="item-subtitle">Stipendia DAAD p≈ôin√°≈°ej√≠ mo≈ænosti v podobƒõ:</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Cherry, A small and tart fruit, Cherries are packed with antioxidants and anti-inflammatory compounds.">View Details</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-4 mb-4" data-tags="Pr√°vo" data-country="Praha" data-subtitle="A small and tart fruit" data-detail="Cherries are packed with antioxidants and anti-inflammatory compounds.">
                        <div class="item-card">
                            <div class="item-icon">üöª</div>
                            <div class="item-name">Stipendia DAAD</div>
                            <div class="item-subtitle">Stipendia DAAD p≈ôin√°≈°ej√≠ mo≈ænosti v podobƒõ:</div>
                            <a href="#" class="btn btn-info btn-sm mt-2 view-details" data-item="Cherry, A small and tart fruit, Cherries are packed with antioxidants and anti-inflammatory compounds.">View Details</a>
                        </div>
                    </div>
                    <!-- Add more items here -->
                </div>
            </div>

            <!-- Sidebar with Filters -->
            <div class="col-lg-4 col-md-5 sidebar">
                <div class="filter-container">
                    <div class="filter-title">Search and Filter</div>
                    <!-- Search Input -->
                    <input
                        type="text"
                        id="searchInput"
                        class="form-control mb-3"
                        placeholder="Search by name or subtitle..."
                    />
                    <!-- Tag Checkboxes (Tags Group) -->
                    <div class="filter-title">Tags</div>
                    <div id="tagCheckboxes" class="d-flex flex-wrap gap-2"></div>

                    <!-- Country Checkboxes (New Group) -->
                    <div class="filter-title">Country of Origin</div>
                    <div id="countryCheckboxes" class="d-flex flex-wrap gap-2"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Item Details -->
    <div class="modal fade" id="itemModal" tabindex="-1" aria-labelledby="itemModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="itemModalLabel">Item Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="itemDetails">
                    <!-- Item details will be dynamically inserted here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

    <script>
        const searchInput = document.getElementById("searchInput");
        const tagCheckboxesContainer = document.getElementById("tagCheckboxes");
        const countryCheckboxesContainer = document.getElementById("countryCheckboxes");
        const dataList = document.getElementById("dataList");
        const listItems = dataList.getElementsByClassName("col-md-6");

        // Extract tags dynamically
        function getUniqueTags(attribute) {
            const tagSet = new Set();
            Array.from(listItems).forEach((item) => {
                const tags = item.getAttribute(`data-${attribute}`).toLowerCase().split(", ");
                tags.forEach((tag) => tagSet.add(tag));
            });
            return Array.from(tagSet);
        }

        // Generate checkboxes for tags or country
        function renderCheckboxes(attribute, container) {
            const items = getUniqueTags(attribute);
            container.innerHTML = "";
            items.forEach((item) => {
                const checkboxWrapper = document.createElement("div");
                const checkboxId = `${attribute}-${item}`;
                checkboxWrapper.innerHTML = `
                    <input type="checkbox" id="${checkboxId}" value="${item}" class="checkbox-filter">
                    <label for="${checkboxId}">${item}<span class="tag-label" id="count-${checkboxId}">(0)</span></label>
                `;
                container.appendChild(checkboxWrapper);
            });
        }

        // Update tag counts dynamically
        function updateCounts() {
            const checkboxes = document.querySelectorAll(".checkbox-filter");
            checkboxes.forEach((checkbox) => {
                const group = checkbox.id.split('-')[0];
                const value = checkbox.value.toLowerCase();

                const count = Array.from(listItems).filter((item) => {
                    const itemTags = item.getAttribute(`data-${group}`).toLowerCase().split(", ");
                    return itemTags.includes(value) && item.style.display !== "none";
                }).length;

                document.getElementById(`count-${checkbox.id}`).textContent = `(${count})`;
            });
        }

        // Filter items based on search and selected tags/countries
        function filterItems() {
            const searchFilter = searchInput.value.toLowerCase();
            const selectedTags = Array.from(document.querySelectorAll(".checkbox-filter:checked"))
                .map((checkbox) => checkbox.value.toLowerCase());

            Array.from(listItems).forEach((item) => {
                const name = item.querySelector(".item-name").textContent.toLowerCase();
                const subtitle = item.querySelector(".item-subtitle").textContent.toLowerCase();
                const tags = item.getAttribute("data-tags").toLowerCase().split(", ");
                const country = item.getAttribute("data-country").toLowerCase();

                const matchesSearch = name.includes(searchFilter) || subtitle.includes(searchFilter);
                const matchesTags = selectedTags.length === 0 || selectedTags.some((tag) => tags.includes(tag) || country.includes(tag));

                item.style.display = matchesSearch && matchesTags ? "" : "none";
            });

            updateCounts();
        }

        // Initialize filters
        renderCheckboxes("tags", tagCheckboxesContainer);
        renderCheckboxes("country", countryCheckboxesContainer);
        searchInput.addEventListener("input", filterItems);
        tagCheckboxesContainer.addEventListener("change", filterItems);
        countryCheckboxesContainer.addEventListener("change", filterItems);
        updateCounts();

        // Handle showing details in the modal
        const itemModal = new bootstrap.Modal(document.getElementById('itemModal'));

        document.querySelectorAll('.view-details').forEach(link => {
            console.log(link)
            link.addEventListener('click', function(event) {
                event.preventDefault();

                const parentItem = link.closest('.col-md-6');
                const name = parentItem.querySelector('.item-name').textContent;
                const subtitle = parentItem.querySelector('.item-subtitle').textContent;
                const details = parentItem.getAttribute('data-detail');

                // Update modal content
                document.getElementById('itemModalLabel').textContent = name;
                document.getElementById('itemDetails').innerHTML = `
                    <p><strong>Subtitle:</strong> ${subtitle}</p>
                    <p><strong>Details:</strong> ${details}</p>
                `;

                // Show modal
                itemModal.show();
            });
        });
    </script>

 </body>
</html>
